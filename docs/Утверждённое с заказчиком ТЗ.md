Дата: 28.08.2025 • Ставка: 1 500 ₽/час

# Цели и границы релиза

MVP: SEO-дружественная витрина (каталог, поиск/фильтры, корзина,
офлайн-оформление без онлайн-оплаты), импорт из Oasis Catalog API,
базовая аналитика, корректная индексация.

Этап 2 (рост): hosted-оплата ЮKassa, виджет ПВЗ/расчёт сроков, личный
кабинет, синонимы/словарь поиска, SEO-лендинги, интеграция «Моё дело».

# Жизненный цикл проекта

**Модель процессов:** итеративная поставка (спринты 1--2 недели), демо
каждый спринт, чек-лист приёмки на фичу, баг-фикс в конце спринта.

Артефакты: схемы БД/импорта, конфиг Meilisearch, ISR-маршруты, шаблоны
писем, чек-лист UAT, playbook деплоя/бэкапов, мониторинг/алёрты.

# Архитектура и стек

-   Frontend: Next.js (SSR/SSG/ISR + on-demand revalidate, next/image).

-   CMS/Backend: Strapi (роли/права, вебхуки).

-   Search: Meilisearch (фасеты, facet-search, typo tolerance).

-   DB: PostgreSQL; кеш/очереди: Redis; медиа: S3-совместимое
    хранилище + CDN.

-   Хостинг: всё на VDS (Ubuntu, Nginx reverse-proxy, Node.js + PM2,
    GitHub Actions CI/CD).

-   Окружения: dev / stage / prod.

# Источник данных и импорт

Источник: Oasis Catalog API (официальная спецификация); сущности:
категории, модели/вариации с ценами, остатками и медиа.

Частота: ежедневно ночью (cron). Алгоритм: инкрементальные батчи
(1--5k), дедуп по SKU/slug, сопоставление атрибутов с фасетами, ретраи,
лог-репорты; вебхуки → переиндексация Meilisearch и Next.js on-demand
ISR.

# Модель данных (ядро Strapi)

Product (модель): title, slug, baseCategory, subCategories\[\],
attributes (Dynamic Zone), priceType (fixed/tiered), prices\[\], MOQ,
hasLogoPrinting, logoMethods\[\], logoArea, images\[\], SEO,
publishedAt.

ProductVariant (вариация): title, slug, sku, price, stock, attributes
JSON, images\[\], isDefault.

Справочники: Category, Attribute, PrintingMethod, TieredPricing.

# Каталог, карточка, медиа

-   Иерархия: каталог → подкатегории → модель → вариация (для вариаций
    собственные URL).

-   Tiered-pricing + MOQ; блок о нанесении логотипа (информблок на MVP).

-   Медиа: ≥1000×1000, квадратные превью/крупные, JPG/WebP (\~85%), 1--4
    ракурса; S3 + CDN; next/image, lazy-loading.

# Поиск и фильтры (Meilisearch)

-   Фасеты по атрибутам; сортировки (популярность/цена/новизна).

-   Опечатки: 1 для коротких (≤6), до 2 --- для длинных (≥7--9).
    Настраивается параметрами Meilisearch.

-   Длинный хвост фасетов: сворачиваем до ТОП-5; facet-search при \>10
    значений.

-   Синонимы/словарь RU/EN --- этап 2.

# Корзина и оформление (без онлайн-оплаты)

-   Оформление без онлайн-оплаты: создание заказа; статусы «Новый /
    Ожидает подтверждения / К отгрузке».

-   Письмо-подтверждение и инструкция по оплате от менеджера
    (SMTP/провайдер, SPF/DKIM).

-   Логирование статусов и событий в Strapi.

# Доставка

-   MVP: без виджета ПВЗ; упрощённая тарификация; порог бесплатной
    доставки --- от 100 000 ₽.

-   Этап 2: интеграции --- СДЭК, Деловые Линии, Яндекс.Доставка (виджет
    ПВЗ, расчёт сроков и стоимости, курьер, постаматы).

# SEO и контент

-   Индексация: категории и товары; комбинации фильтров --- noindex +
    rel=\"canonical\" на базовую категорию.

-   Пагинация --- rel=\"prev/next\".

-   Sitemap (категории/товары/статические) --- автообновление при
    импорте.

-   Микроразметка: Product/Offer, BreadcrumbList.

# Нефункциональные требования (NFR), безопасность, наблюдаемость

-   Производительность: API p95 \< 300 мс (с кешем), TTFB p95 \< 800 мс;
    Core Web Vitals --- «зелёная» зона.

-   Надёжность: 99.9% аптайм витрины; RPO 24 ч / RTO 4 ч (БД/медиа).

-   Безопасность: HTTPS, HSTS, секреты в vault/env, доступ к админке ---
    IP/2FA.

-   Наблюдаемость: логи запросов/ошибок, мониторинг аптайма, алерты
    (импорт, реиндекс, 5xx).

# Инфраструктура и DevOps

-   Ubuntu LTS, users/SSH/фаервол; Nginx (TLS/HTTP2/HSTS), Node.js + PM2
    cluster, logrotate.

-   CI/CD (GitHub Actions): build + миграции БД + zero-downtime deploy.

-   Бэкапы: PostgreSQL (ежедневно, хранение N дней), Meilisearch
    snapshot, S3 lifecycle/IA.

-   Strapi webhooks → Next.js on-demand ISR и переиндексация
    Meilisearch.

# Аналитика и правовые

-   GA4 + базовые e-commerce события (без онлайн-платежей в MVP).

-   Страницы: Политика, Оферта; куки-consent.

-   При будущей онлайн-оплате: хранить только служебные идентификаторы
    платежей (SAQ A).

# 13) План работ и оценка (MVP)

  --------------------------------------------------------------------------------
  Этап                 Описание                       Часы          Стоимость (₽)
  -------------------- ------------------------------ ------------- --------------
  Этап 0 ---           Финальная фиксация             5             7 500
  Предпроект и         фасетов/URL/структуры страниц,               
  финализация ТЗ       схем импорта/реиндексации,                   
                       критериев приёмки.                           

  Этап 1 ---           Провиженинг VDS,               10            15 000
  Архитектура и DevOps Nginx/TLS/HSTS, PM2+systemd,                 
  (VDS)                CI/CD.                                       

  Этап 2 --- Backend   Content-types, роли/права,     12            18 000
  (Strapi,             базовые email-шаблоны.                       
  моделирование)                                                    

  Этап 3 --- Импорт    Клиент Oasis, батчи/ретраи,    14            21 000
  Oasis + медиа +      логи, S3-пайплайн, триггеры                  
  ISR/реиндекс         Meilisearch/Next ISR.                        

  Этап 4 --- Поиск     Индексы/фасеты,                14            21 000
  (Meilisearch)        typo-tolerance, facet-search,                
                       сортировки, хуки синка.                      

  Этап 5 --- Frontend  Главная;                       112           168 000
  (Next.js)            категории/фильтры/пагинация;                 
                       PDP модель/вариация;                         
                       поиск/подсказки; статические;                
                       портфолио; оптимизация                       
                       изображений.                                 

  Этап 6 --- Корзина и Заказ/статусы,                 12            18 000
  оформление (без      письмо-подтверждение,                        
  онлайн-оплаты)       инструкция по оплате,                        
                       логирование.                                 

  Этап 7 ---           GA4 события, robots/sitemap,   9             13 500
  Аналитика/правовые   микроразметка.                               

  Этап 8 ---           UAT чек-лист, smoke/регресс,   20            30 000
  Тестирование         перф-замеры, SEO-crawl sanity.               

  Этап 9 --- Запуск и  Prod катовер, мониторинг,      12            18 000
  стабилизация         быстрые фиксы/обучение.                      

  Итого (MVP)                                         220           330 000
  --------------------------------------------------------------------------------

## Декомпозиция Этап 5 --- Frontend (112 ч)

  ----------------------------------------------------------------------------
  Подэтап                         Часы                  Стоимость (₽)
  ------------------------------- --------------------- ----------------------
  Архитектура фронта, layout,     12                    18 000
  мета/OG/Schema.org                                    

  Главная                         8                     12 000

  PLP/категории +                 36                    54 000
  фильтры/пагинация/сортировки                          

  PDP модель/вариация +           24                    36 000
  галерея/атрибуты                                      

  Поиск/подсказки/пустые/ошибки   16                    24 000

  Статические страницы            6                     9 000
  (оферта/политика/контакты)                            

  Раздел «Портфолио»              6                     9 000

  Оптимизация изображений         4                     6 000
  (next/image, CDN)                                     
  ----------------------------------------------------------------------------

# 14) Этап 2 (рост) --- план работ и оценка

  ---------------------------------------------------------------------------
  Подэтап                  Описание         Часы             Стоимость (₽)
  ------------------------ ---------------- ---------------- ----------------
  ЮKassa (hosted-чекаут,                    26               39 000
  редирект,                                                  
  вебхуки/экраны/письма)                                     

  Доставка: СДЭК/Деловые                    34               51 000
  Линии/Яндекс.Доставка                                      
  (виджет                                                    
  ПВЗ/сроки/стоимость)                                       

  Личный кабинет (история,                  56               84 000
  повторы, адреса,                                           
  статусы)                                                   

  Синонимы/словарь поиска                   8                12 000
  RU/EN                                                      

  SEO-лендинги по фасетам                   16               24 000
  (генерация +                                               
  каноникал-сетка)                                           

  Интеграция «Моё дело»                     16               24 000
  (экспорт                                                   
  счетов/документов)                                         

  Расширенная аналитика                     6                9 000
  e-commerce                                                 
  (покупки/возвраты)                                         

  Тестирование                              12               18 000

  Стабилизация                              6                9 000

  Итого (Этап 2)                            180              270 000
  ---------------------------------------------------------------------------

# 15) График платежей (MVP)

  -----------------------------------------------------------------------
  Этап платёжа            Процент                 Сумма (₽, от 330 000)
  ----------------------- ----------------------- -----------------------
  20% аванс (старт        20%                     66 000
  проекта)                                        

  25% после               25%                     82 500
  Backend/Импорт/Поиск                            
  (этапы 2--4)                                    

  30% после Frontend      30%                     99 000
  (этап 5)                                        

  15% после UAT-приёмки   15%                     49 500
  (этапы 6--8)                                    

  10% после               10%                     33 000
  стабилизации/выхода в                           
  прод (этап 9)                                   
  -----------------------------------------------------------------------

# 16) Критерии приёмки (выборочно)

-   Импорт Oasis nightly завершается без критических ошибок; логи
    доступны; Meilisearch синхронизирован.

-   ISR on-demand отрабатывает при публикации в Strapi: страницы
    пересобираются, кеш актуализируется.

-   Поиск: фасеты корректны, counts точные; опечатки 1/2 дают
    релевантный топ-10; facet-search активен при 10+ значений.

-   SEO: canonical для фильтров; sitemap обновляется после импорта;
    микроразметка Product/Offer валидна.

-   Корзина/оформление: заказ создаётся, письма уходят, статусы
    логируются в CMS.

-   Перфоманс: TTFB p95 \< 800 мс; API p95 \< 300 мс (с кешем); CWV в
    «зелёной» зоне.

*Примечание: онлайн-оплата (ЮKassa) и логистические интеграции включены
в Этап 2 и не входят в MVP.*
