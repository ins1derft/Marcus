# Отчёт по работам за 30 сентября 2025

## Резюме

Актуализирован стек контейнеров: подтверждены конфигурации development и
production compose, версии сервисов и проксирование через Nginx.
Зафиксированы отсутствующие элементы (CI/CD, импорт, контент в Strapi).

## Что сделано

### Инфраструктура / контейнеры

- Проверены `docker/development.compose.yml` и `docker/production.compose.yml`.
  В dev поднимаются сервисы **frontend (Next.js 15.5.3)**,
  **strapi (Strapi 5.23.6)**, **database (PostgreSQL 14)**,
  **meilisearch (v1.7)**; production добавляет **nginx** и **certbot** с теми
  же зависимостями и томами.【F:docker/development.compose.yml†L1-L92】【F:docker/production.compose.yml†L1-L119】
- Проверено, что frontend получает `API_*` и `NEXT_PUBLIC_MEILISEARCH_*`, но
  код их пока не использует; Strapi получает конфигурацию Postgres и Meili,
  плагины активируются только при наличии переменных.【F:docker/development.compose.yml†L11-L18】【F:strapi/config/plugins.ts†L1-L17】
- Уточнены версии зависимостей по package.json: Next.js 15.5.3 / React 19.1,
  Strapi 5.23.6, `strapi-plugin-meilisearch` 0.13.3, `pg` 8.8.0.【F:frontend/package.json†L5-L22】【F:strapi/package.json†L11-L24】

### Диагностика

- Nginx в production проксирует `frontend:3000` и `strapi:1337`, включает
  HTTPS, кеширование `_next/static` и `/static`, отдельные серверы для
  `api.` и `cms.` поддоменов. Файлы сертификатов ожидаются от Certbot.【F:nginx/default.conf†L1-L83】
- База данных настраивается через Postgres; fallback на SQLite остаётся в
  `config/database.ts`, но в docker окружении не используется. Это важно
  при планировании миграций.【F:strapi/config/database.ts†L1-L46】
- В Strapi отсутствуют типы контента (`src/api` содержит только `.gitkeep`).
  Соответственно, Meilisearch не индексирует данные и фронтенд выводит
  демо-страницу без интеграций.【F:strapi/src/api/.gitkeep†L1-L1】【F:frontend/src/app/page.tsx†L1-L72】

### Риски / TODO

- Нет автоматизации деплоя (GitHub Actions), Terraform/IaC, бэкапов или
  импортов данных — требуется планирование, прежде чем двигаться к
  функциональным этапам.
- Хранилище медиа остаётся локальным на томе Strapi; для production стоит
  определить внешнее объектное хранилище и CDN.
